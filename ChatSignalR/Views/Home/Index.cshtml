@{
    ViewBag.Title = "Home Page";
}


@section scripts
{
   
<script type="text/javascript" src="~/Scripts/jquery-1.10.2.js"></script>
<script type="text/javascript" src="~/Scripts/jquery.signalR-2.0.2.js" ></script>
    <script type="text/javascript" src="~/signalr/hubs" ></script>
   
     <script type="text/javascript">

         $(function () {
             //Get reference from the autogenerated HUb in the controller
             var chatHub = $.connection.chatHub;

             //the bellow section will call the SendMessageToPage on the cpontroller
             chatHub.client.SendMessageToPage = function (name, massage) {
                 $('#discussion').append("<li><strong>" + name + "</strong> " + massage + "</li>")

             };

             $('#displayName').val(prompt("Enter Your Name:", "SignalR Chat"));
             $('#message').focus();

             $.connection.hub.start().done(function () {
             
                 alert("Connected");
                 $('#sendMessage').on("click", function () {
                     var name = $('#displayName').val();
                     var message = $('#message').val();
                     chatHub.server.send(name, message);

                     $('#message').val("").focus();
                 });
             });
         });

    </script>
   
}

<div class="jumbotron">
    <h1 style="color:red;">ChatRoom</h1> 
</div>

<div class="row">
    <div class="col-md-12"> 
        <div class="form-group has-success">
            <label class="control-label" for="inputSuccess1">Input with success</label>
            <input type="text" class="form-control" id="message"/>
            <button type="button" class="btn btn-success" id="sendMessage">Send</button>
        </div>
               
    </div>
    <input type="hidden" id="displayName" />
    <ul id="discussion">

    </ul>



</div>